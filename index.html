<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>RED-B JACKPOT</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Montserrat:wght@300;500;700&display=swap" rel="stylesheet" />
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at top, #7b1fa2 0, #140022 50%, #020007 100%);
      color: #fff;
      font-family: "Montserrat", system-ui, sans-serif;
    }

    .container {
      width: 95%;
      max-width: 460px;
      background: radial-gradient(circle at top, rgba(123, 31, 162, 0.35), rgba(10, 0, 25, 0.95));
      border-radius: 26px;
      padding: 20px 18px 26px;
      text-align: center;
      border: 1px solid rgba(255, 255, 255, 0.18);
      box-shadow:
        0 0 30px rgba(156, 39, 176, 0.9),
        0 0 80px rgba(63, 81, 181, 0.5);
    }

    h1 {
      font-family: "Orbitron", system-ui;
      font-size: 1.8rem;
      letter-spacing: 2px;
      text-transform: uppercase;
      margin-bottom: 6px;
      color: #ffeb3b;
      text-shadow:
        0 0 12px rgba(255, 235, 59, 0.9),
        0 0 18px rgba(255, 193, 7, 0.7);
    }

    .slot-wrapper {
      margin: 12px 0 16px;
      padding: 10px;
      border-radius: 20px;
      background: linear-gradient(135deg, #1a0030, #3a145c);
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow:
        inset 0 0 18px rgba(0, 0, 0, 0.9),
        0 0 18px rgba(123, 31, 162, 0.7);
    }

    .slot-machine {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 6px;
      padding: 8px;
      border-radius: 14px;
      background: radial-gradient(circle at top, #eeeeff 0, #cfd8dc 45%, #90a4ae 100%);
      box-shadow: inset 0 0 8px rgba(0, 0, 0, 0.7);
    }

    .reel-column {
      display: grid;
      grid-template-rows: repeat(3, 1fr);
      gap: 4px;
    }

    .cell {
      height: 64px;
      border-radius: 10px;
      background: radial-gradient(circle at top, #ffffff 0, #eceff1 45%, #b0bec5 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2.2rem;
      color: #000;
      transition: transform 0.15s ease, filter 0.15s ease;
    }

    .cell.win-highlight {
      transform: scale(1.25);
      filter: drop-shadow(0 0 12px #ffeb3b);
    }

    #spinBtn {
      margin-top: 4px;
      width: 100%;
      padding: 14px;
      border-radius: 999px;
      border: none;
      font-family: "Orbitron", system-ui;
      font-size: 1rem;
      text-transform: uppercase;
      letter-spacing: 1px;
      cursor: pointer;
      background: radial-gradient(circle at top, #ffeb3b 0, #ff9800 40%, #e91e63 100%);
      color: #2b0b24;
      box-shadow: 0 0 18px rgba(255, 235, 59, 0.8);
    }

    #spinBtn:disabled {
      opacity: 0.55;
      cursor: not-allowed;
    }

    #mensaje {
      margin-top: 14px;
      min-height: 60px;
      font-size: 0.92rem;
    }

    .paytable {
      margin-top: 12px;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      font-size: 0.78rem;
      color: #ffe082;
      text-align: left;
    }

    .nota {
      display: block;
      margin-top: 14px;
      font-size: 0.75rem;
      color: #b0bec5;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>RED-B JACKPOT</h1>
    <p>Toc√° el bot√≥n y prob√° tu suerte üé∞</p>

    <div class="slot-wrapper" id="slotWrapper">
      <div class="slot-machine" id="slotMachine"></div>
    </div>

    <button id="spinBtn">GIRAR RED-B JACKPOT</button>

    <p id="infoIntentos">Intentos restantes hoy: 3/3</p>

    <div id="mensaje"></div>

    <div class="paytable">
      <div>
        üÉè <strong>JOKER JACKPOT</strong><br>
        ‚Ä¢ 5 üÉè ‚Üí 50K fichas<br>
        ‚Ä¢ 4 üÉè ‚Üí 15K fichas<br>
        ‚Ä¢ 3 üÉè ‚Üí 10K fichas
      </div>

      <div>
        ‚≠ê ESTRELLAS<br>
        ‚Ä¢ 3 ‚≠ê ‚Üí 500 fichas
      </div>

      <div>
        üíé DIAMANTES<br>
        ‚Ä¢ 3 üíé ‚Üí 1K fichas
      </div>

      <div>
        üí† GEMAS<br>
        ‚Ä¢ 3 üí† ‚Üí 2K fichas
      </div>
    </div>

    <small class="nota">
      Si ten√©s premio, sac√° captura y envi√°la a la l√≠nea RED-B con tu c√≥digo.
    </small>
  </div>

  <script>
    const MAX_INTENTOS_DIA = 3;
    const STORAGE_KEY = "redb_jackpot_state_vFinal";

    const SYMBOLS = ["üÉè", "‚≠ê", "üíé", "üí†"];

    const PRIZES = {
      "‚≠ê": 500,
      "üíé": 1000,
      "üí†": 2000
    };

    const slotMachine = document.getElementById("slotMachine");
    const spinBtn = document.getElementById("spinBtn");
    const mensaje = document.getElementById("mensaje");
    const infoIntentos = document.getElementById("infoIntentos");

    function crearGrid() {
      slotMachine.innerHTML = "";
      for (let col = 0; col < 5; col++) {
        const colDiv = document.createElement("div");
        colDiv.className = "reel-column";
        for (let row = 0; row < 3; row++) {
          const cell = document.createElement("div");
          cell.className = "cell";
          cell.dataset.row = row;
          cell.dataset.col = col;
          cell.textContent = simboloRandom();
          colDiv.appendChild(cell);
        }
        slotMachine.appendChild(colDiv);
      }
    }

    function simboloRandom() {
      return SYMBOLS[Math.floor(Math.random() * SYMBOLS.length)];
    }

    function simboloRandomSinJoker() {
      return ["‚≠ê", "üíé", "üí†"][Math.floor(Math.random() * 3)];
    }

    function animar(callback) {
      const cells = document.querySelectorAll(".cell");
      cells.forEach(cell => cell.textContent = simboloRandom());
      setTimeout(() => {
        const midCells = document.querySelectorAll('[data-row="1"]');
        midCells.forEach(cell => cell.textContent = simboloRandomSinJoker());
        callback();
      }, 900);
    }

    function evaluarPremio() {
      const grid = [];
      for (let row = 0; row < 3; row++) {
        const fila = [];
        for (let col = 0; col < 3; col++) {
          fila.push(document.querySelector(`.cell[data-row="${row}"][data-col="${col}"]`).textContent);
        }
        grid.push(fila);
      }

      for (let row = 0; row < 3; row++) {
        const s1 = grid[row][0], s2 = grid[row][1], s3 = grid[row][2];
        if (s1 === s2 && s2 === s3 && PRIZES[s1]) {
          return { simbolo: s1, fichas: PRIZES[s1], row };
        }
      }
      return null;
    }

    function generarCodigo(simbolo) {
      const t = Date.now();
      return "REDB-" + simbolo + "-" + t.toString().slice(-6);
    }

    function mostrarPremio(p) {
      mensaje.innerHTML = `
        üéâ ¬°GANASTE <strong>${p.fichas} FICHAS</strong>! üéâ<br>
        C√≥digo: <strong>${generarCodigo(p.simbolo)}</strong><br>
        üì∏ Sac√° captura y envi√°la a la l√≠nea
      `;
      spinBtn.disabled = true;
    }

    function hoy() {
      const d = new Date();
      return `${d.getFullYear()}-${d.getMonth()+1}-${d.getDate()}`;
    }

    function cargarEstado() {
      const data = JSON.parse(localStorage.getItem(STORAGE_KEY));
      if (!data || data.fecha !== hoy()) {
        return { fecha: hoy(), intentos: 0 };
      }
      return data;
    }

    function guardarEstado(e) {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(e));
    }

    function actualizarIntentos(e) {
      infoIntentos.textContent = `Intentos restantes hoy: ${3 - e.intentos}/3`;
    }

    function jugar() {
      const estado = cargarEstado();
      if (estado.intentos >= 3) {
        mensaje.textContent = "Ya usaste tus 3 intentos. Volv√© ma√±ana.";
        spinBtn.disabled = true;
        return;
      }

      spinBtn.disabled = true;
      estado.intentos++;
      guardarEstado(estado);
      actualizarIntentos(estado);

      mensaje.textContent = "Girando... üé∞";

      animar(() => {
        const premio = evaluarPremio();
        if (premio) mostrarPremio(premio);
        else {
          mensaje.textContent = "Hoy no toc√≥ premio üôà";
          if (estado.intentos < 3) spinBtn.disabled = false;
        }
      });
    }

    (function init() {
      crearGrid();
      const estado = cargarEstado();
      actualizarIntentos(estado);
      if (estado.intentos >= 3) {
        mensaje.textContent = "Ya usaste tus 3 intentos. Volv√© ma√±ana.";
        spinBtn.disabled = true;
      }
    })();

    spinBtn.addEventListener("click", jugar);
  </script>
</body>
</html>
